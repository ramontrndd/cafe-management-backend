<html>
  <head>
    <style>
      table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
      }

      td,
      th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
      }
    </style>
  </head>
  <body>
    <h3 style="text-align: center;">Café Management</h3>

    <table>
      <tr>
        <th>Nome: <%= name %></th>
        <th>Email: <%= email %></th>
      </tr>

      <tr>
        <th>Número de contato: <%= contactNumber %></th>
        <th>Método de Pagamento: <%= paymentMethod %></th>
      </tr>
    </table>

    <h3>Detalhes do Produto:</h3>

    <table>
      <tr>
        <th>Nome</th>
        <th>Produto</th>
        <th>Quantidade</th>
        <th>Preço</th>
        <th>Total</th>
      </tr>

      <% if(productDetails.length > 0) { %> 
        <% productDetails.forEach(product => { %>
          <tr>
            <td><%= product.name %></td>
            <td><%= product.category %></td>
            <td><%= product.quantity %></td>
            <td>R$<%= product.price.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) %></td>
            <td>R$<%= product.total.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) %></td>
          </tr>
        <% }); %>
      <% } %>
    </table>

    <% var displayTotalAmount = totalAmount !== undefined ? totalAmount : 0; %>
    <h3 style="text-align: center;">Total: R$<%= displayTotalAmount.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) %></h3>

    <h3 style="text-align: center;">Obrigado, Volte sempre!</h3>
  </body>
</html>
